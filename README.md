# Oni-Calc: 記憶力脳トレゲーム

## 概要

Oni-Calcは、手書き数字認識技術を活用した記憶力トレーニングゲームです。ユーザーは一桁同士の加減算問題を連続で解きながら、**n個前の問題の答え**を記憶して手書きで入力する必要があります。

## ゲームの仕組み

### 基本ルール
1. **問題表示**: 一桁同士の加減算問題が連続で表示される
2. **記憶タスク**: 現在の問題ではなく、**n個前の問題の答え**を手書きで入力
3. **脳トレ効果**: n個分の答えを記憶しながら計算することで、ワーキングメモリを鍛える

### 例（n=3の場合）
```
問題1: 3 + 4 = ?  → 答え: 7 (記憶)
問題2: 8 - 2 = ?  → 答え: 6 (記憶)
問題3: 5 + 1 = ?  → 答え: 6 (記憶)
問題4: 9 - 3 = ?  → ここで問題1の答え「7」を手書き入力
問題5: 2 + 7 = ?  → ここで問題2の答え「6」を手書き入力
...
```

## 技術構成

### サーバー側
- **手書き数字認識**: PyTorchベースのニューラルネットワーク
- **MNISTデータセット**: 学習済みモデル（`model.pt`）
- **推論API**: 手書き画像を受け取り、認識結果を返す

### クライアント側
- **ゲームロジック**: 問題生成、記憶管理、スコア計算
- **手書き入力**: Canvas APIを使用した手書き数字入力
- **UI/UX**: 直感的なゲームインターフェース

## ファイル構成

```
oni-calc/
├── make_model.py      # ニューラルネットワーク学習スクリプト
├── infer_digits.py    # 手書き数字認識推論スクリプト
├── model.pt          # 学習済みモデル
├── tests/            # テスト用画像
│   ├── image1.png
│   ├── image3.png
│   ├── image5.png
│   └── image9.png
└── Readme.md         # このファイル
```

## 使用方法

### モデル学習
```bash
python make_model.py
```

### 手書き数字認識テスト
```bash
python infer_digits.py --model model.pt --image tests/image1.png
```

## 今後の開発予定

- [ ] Webアプリケーションのフロントエンド実装
- [ ] 手書き数字認識APIサーバーの構築
- [ ] ゲームロジックの実装（問題生成、記憶管理）
- [ ] スコアシステムとランキング機能
- [ ] 難易度調整（nの値、計算の複雑さ）

## 技術スタック

- **フロントエンド**: React + JavaScript + Canvas
- **バックエンド**: Python + FastAPI
- **機械学習**: PyTorch, MNIST
- **画像処理**: OpenCV, PIL
- **デプロイ**: Vercel (フロント + API統合)

---

このプロジェクトは、機械学習技術とゲームデザインを組み合わせた、脳トレアプリケーションです。
